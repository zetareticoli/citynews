/* ==========================================================================
  MODULES
  ========================================================================== */

/* ==========================================================================
  Global Styles
  ========================================================================== */

.module {
	width: 100%;
	border-top: 2px solid $bordercolor;
}

.secondary-column .module {
	margin-bottom: 1rem;
}

.has-flex {
	.module {
		@include display(flex);
		@include flex-flow(column nowrap);

		.l-list {
			@include flex(1 1 auto);
		}
	}
}

/* ==========================================================================
  Back Top
  ========================================================================== */

.back-top {
	clear: left;
	padding: 10px 0;
	border-top: 1px solid #ccc;
	
	@include bp(l) {
		display: none;
	}
}

.bottom-nav {
	border-top: 1px solid #ccc;
	@include bp(l) {
		display: none;
	}
}

.bottom-nav ul {
	padding: 0;
	width: 50%;
	float: left;

	& li {
		margin-bottom: 10px;
	}

	& a {
		@include font-size(12);
	}
}

/* ==========================================================================
  Blog
  ========================================================================== */

.blog-name {

	.link {
		color: $bluegrey500;
	}
}

.from-blog {

	.l-list-item {
		padding-bottom: 0;
	}

	.l-list-item:last-child {
		border-bottom: 1px solid $bordercolor;
	}
}

.blog-story {
	position: relative;

	.story-header {
		width: 100%;
		position: relative;
		margin-bottom: $baseline;
		padding: .75rem 0 .5rem .5rem;
		background-color: $bluegrey100;
		@include clearfix;
		
		&:after {
			display: inline-block;
			position: absolute;
			content: '';
			margin: auto;
			left: .5rem;
			bottom: -.5rem;
			width: 0;
			height: 0;
			vertical-align: middle;
			border-top: .5rem solid;
			border-right: 1rem solid transparent;
			border-left: 1rem solid transparent;
			color: $bluegrey100;
		}
	}

	.story-heading .link {
		color: $bluegrey600;
	}

	.blog-author-photo {
		position: absolute;
		bottom: 0;
		right: 0;
	}

	.blog-author-photo {
		width: 40%;
		margin-top: -0.75rem;
	}

	.blog-name {
		margin-bottom: 0;
		@include font-size($fontsize200);
	}
}

.blog-card {
	margin-bottom: 1rem;
	width: 100%;
}

.blog-card .blog-author-photo {
	text-align: center;
}

.blog-details {
	background-color: $bluegrey100;
	border-top-width: 2px;
	border-top-style: solid;
	padding: 1rem;

	@include bp(l) {
		padding: 2rem;
	}

	.blog-name {
		margin-bottom: $baseline / 2;
		@include font-size($fontsize400);

		@include bp(l) {
			@include font-size($fontsize500);
		}
	}

	.blog-description {
		margin: 1rem 0 0;
		font-family: $texttypeface;
		color: $black800;
	}
}

/* ==========================================================================
  Contribute
  ========================================================================== */

.contribute {
	background-color: $bluegrey100;
	text-align: center;
	padding: 1rem;

	h5 {
		color: $black800;
		font-family: $titleseriftypeface;
	}
}

/* ==========================================================================
  Custom Sub-Headers
  ========================================================================== */

.custom-subheader {
	position: relative;
	background-color: $bluegrey100;
	border-top-width: 2px;
	border-top-style: solid;
	z-index: 7;

	.page-title {
		display: inline-block;
		margin: .5rem 0;
		@include font-size($fontsize600);
		line-height: 2.5rem;

		@include bp(m) {
			margin: 1rem .5rem 1rem 0;
			@include font-size($fontsize900);
		}

		@include bp(l) {
			margin: 1.5rem 1rem 1.5rem 0;
		}

		.link {
			color: $black900;
		}
	}

	.secondary-nav {
		background-color: darken($bluegrey100, 3%);
		text-align: left;

		@include bp(m) {
			display: block;
		}

		.nav-item {
			margin: 0;

			a {
				display: inline-block;
				padding-left: 1rem;
				line-height: 2.5rem;
			}

			span {
				padding-right: 1rem;

			}

			&:hover {
				box-shadow: inset 0 -.35rem 0 $bluegrey200;
			}
		}

		.nav-item.current {
			background-color: white;
			border-top: 2px solid $bluegrey200;
		}
	}

	.byline {
		display: none;

		@include bp(m) {
			display: inline-block;
		}

		em {
			color: $black700;
		}
	}

	.follow-btn {
		position: absolute;
		top: .5rem;
		right: 1rem;

		@include bp(m) {
			top: 1rem;
		}

		@include bp(l) {
			top: 1.5rem;
		}
	}

	.subheader-nav-dropdown {
		margin-bottom: .5rem;

		@include bp(m) {
			display: none;
			visibility: hidden;
		}
	}
}

// Blog Subheader ===============================================================

.blog-subheader {
	position: relative;

	.page-title,
	.byline {
		display: block;

		@include bp(l) {
			display: inline-block;
		}
	}

	@include max-bp(s) {

		.page-title {
			margin-bottom: 0;
			@include font-size($fontsize400);
			line-height: 1.5rem;
		}

		.byline {
			padding-bottom: $baseline;
			@include font-size($fontsize100);
		}
	}

	.blog-author-photo {
		width: 5rem;
		float: right;
		margin: 0 0 0 $baseline;

		@include bp(m) {
			width: 10rem;
		}

		@include bp(l) {
			float: left;
			margin: 0 1rem 0 0;
		}
	}	
}

/* ==========================================================================
  Discussion
  ========================================================================== */

.discussion-section {
    border-bottom: 0.15rem solid $bordercolor;
    padding-bottom: 1rem;

    @include bp(l) {
    	padding-bottom: 2rem;
    }

    .discussion-comment-box,
    .discussion-thread {
    	@include bp(xl) {
	    	margin-left: 1rem;    		
    	}
    }
    
    .discussion-thread {
        width: 100%;
        
        .nested-thread {
            padding-left: 2rem;

            @include bp(m) {
                padding-left: 4rem;
            }
        }
    }
    
    .discussion-comment-box {
    	margin-bottom: $baseline;
    }

    .comment-author-name {
    	font-weight: 700;
    	color: $black800;
    }

    .comment-box-author {
    	@include clearfix;
    	margin-bottom: .5rem;

    	.comment-author-label,
    	.comment-author-name {
    		display: inline;

    		@include bp(l) {
    			display: block;
    		}
    	}

    	.comment-author-label {
    		color: $black600;
    	}

    	.comment-author-photo {
    	    display: none;
    	        
    	    @include bp(l) {
    	        display: block;
    	        float: left;
    	        margin-right: 1rem;
    	    }
    	}
    }

    .comment-box-content {
    	@include clearfix;

    	form {
    		margin-bottom: 0;

    	    textarea {
    	        width: 100%;
    	        margin: 0 auto 0.5rem;
    	    }

    	    .comment-submit-btn {
    	        width: 100%;
    	        margin: 0 auto;
    	        
    	        @include bp(m) {
    	            width: auto;
    	            float: left;
	    	    	margin-right: .5rem;
    	        }
    	    }

    	    .comment-box-options {
    	    	display: inline-block;
				line-height: 2.5rem;

				.btn {
	    	    	@include font-size($fontsize100);
				}
    	    }
    	}
    }
    
    .comment-info-author {
        margin-bottom: 1rem;
        
        .comment-author-name {
        	@include font-size($fontsize200);
            padding-top: 0.750rem;
        }
        
        .timestamp {
            display: block;
        }
    }
    
    .comment {
        padding-top: 1rem;
        margin-top: 1rem;
        border-top: 1px solid $bordercolor;
        @include clearfix;

    	@include bp(m) {
    		padding-top: 1.5rem;
    		margin-top: 1.5rem;
    	}

        .author-photo {
            display: block;
            float: left;
            margin-right: .5rem;
        }

        .comment-content {
        	@include max-bp(s) {
	        	@include font-size($fontsize200);
        	}
        }

        .comment-actions {
            .btn {
                font-size: .75rem;
                margin-right: .5rem;
                line-height: 1.25rem;
            }
        }
    }

    .discussion-head {
    	width: 100%;

    	h3 {
    		color: $bluegrey600;
    		@include font-size($fontsize500) ;
    		line-height: 1.5rem;
    	}

    	.discussion-counter {
    		color: $bluegrey400;
    	}

        .discussion-action {
	        @include font-size($fontsize100);
	        line-height: 1.25rem;
        }
    }

    .thread-load {
    	margin: 1rem 0;
    }
}

/* ==========================================================================
  Filters
  ========================================================================== */

.filter-block {
	width: auto;
	margin: 0;

	@include bp(l) {
		margin: 0 0 $baseline 0;
		padding: $baseline 0;
		border-bottom: 1px solid $bordercolor;

		&:last-child {
			border-bottom: 0;
		}
	}

	hr {
		margin: .65rem 0;
	}

	h5, h6 {
		font-family: $alttexttypeface;
	}

	h5 {
		margin-bottom: .65rem;
		@include font-size($fontsize300);
		color: $black600;
	}

	h6 {
		margin-bottom: $baseline;
		font-family: $alttexttypeface;
		@include font-size($fontsize100);
		color: $black900;

		@include bp(m) {
			@include font-size($fontsize200);
		}
	}

	&.grouped-filters {
		padding: .75rem;
		border: 2px solid $bordercolor;
	}

	.checkbox-label {
		@include font-size($fontsize200);
	}

	.checkbox,
	.radio {
		line-height: 1rem;
	}

	.checkbox .checkbox-label, 
	.radio .radio-label {
		padding-left: 1.25rem;
	}

	.checkbox .checkbox-label::before, 
	.radio .radio-label::before,
	.checkbox .checkbox-label::after, 
	.radio .radio-label::after {
		width: .85rem;
		height: .85rem;
		top: .5rem;
	}
}

.filters-list {
	li {
		padding: .25rem 0;
		line-height: 1rem;
	}

	.link {
		color: $black800;

		&:hover {
			color: $black1000;
		}
	}
}

// Aside Filters ===============================================================

.aside-filters {

	form {
		margin-bottom: $baseline;
	}

	.dropdown {
		width: 100%;
		margin-bottom: $baseline;

		.dropdown-selection {

			.label {
				margin-bottom: .25rem;
			}
			
			.timestamp,
			.dropdown-toggle-selection {
				display: block;
			}

			.dropdown-toggle-selection {
				@include font-size($fontsize400);
				font-weight: 700;
				margin-bottom: .25rem;
			}
		}

		.dropdown-toggle {
			width: 100%;
			padding: .875rem;
			@include border-top-radius(0);
			@include border-bottom-radius(0);
			text-align: left;
			color: $black700;
			@include font-size($fontsize200);

			.caret {
				position: absolute;
				right: 1rem;
				top: 45%;
			}
		}

		.dropdown-menu {
			width: 100%;
		}
	}
}

// Top Filters ===============================================================

.top-filters {
	margin-bottom: 1rem;

	.dropdown {
		float: left;
		padding: 0 .25rem;
		width: 50%;

		h1 {
			font-family: $alttexttypeface;
			font-weight: 400;
			@include font-size($fontsize200);
			margin-bottom: 0;
			line-height: 1rem;
		}
	}

	.dropdown-menu {
		width: 100%;

		@include bp(m) {
			width: 100%;
		}
	}

	.dropdown-toggle {
		width: 100%;
		text-align: left;
		
		.caret {
			position: absolute;
			top: 1.15rem;
			right: 1rem;
		}
	}
}

.filters-dropdown {
	position: relative;
	margin-bottom: 1rem;

	.filters-toggle {
		color: $black700;
	}

	.filters-menu {
		width: 97%;
		height: 97%;
		position: fixed;
		z-index: -1;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;
		margin: auto;
		display: block;
		opacity: 0;
		@include rounded(0);
		border: 0;
		background-color: rgba(255,255,255,.99);
		box-shadow: 0 5px 15px rgba(0,0,0,0.5);
	}

	.dropdown-header {
		padding: 1.5rem 0 0 1rem;
		margin-bottom: 1rem;
		@include font-size($fontsize200);
	}

	.filter-block {
		padding: 0 1rem;
		height: 84%;
		overflow-y: auto;
	}

	.dropdown-actions {
		position: absolute;
		top: 1rem;
		right: 1rem; 

		.btn {
			margin: 0 $baseline;
		}
	}

	&.is-open {
		.filters-menu {
			opacity: 1;
			z-index: 10;
		}
	}

	.filter-actions {
		.btn {
			display: inline-block;
		}
	}
}

.filters-dropdown .filters-menu {
	@include transform(scale(.7,.7));
	@include transition(transform .15s ease-out);
}

.filters-dropdown.is-open .filters-menu {
	@include transform(scale(1,1));
	@include transition(transform .15s ease-out);
}

/* ==========================================================================
  Bordered Dropdown 
  ========================================================================== */

.dropdown .bordered-dropdown-menu,
.dropup .bordered-dropdown-menu {
	border: 0;
  	border-top-width: 2px;
  	border-top-style: solid;
  	border-radius: 0;
  	margin: 0;
  	z-index: 99999; 
}

/* ==========================================================================
  Network Dropdown
  ========================================================================== */

.dropdown .network-dropdown,
.dropup .network-dropdown {
	padding: $baseline;

	li > a {
		padding: .25rem .5rem;
	}

	.network-item {
		display: inline-block;
		float: left;
		width: 33.33%;
	}

	.divider {
		clear: left;
	}
}

// Header Network Dropdonw

.header .dropdown .network-dropdown {
	width: 18rem;

	.dropdown-menu {
		z-index: 99999;
	}
}

// Footer Network Dropup

.site-footer .dropup .network-dropdown {
	width: 100%;

	@include bp(m) {
		left: auto;
		right: 0;
		width: 18rem;
	}
}

/* ==========================================================================
  Account Dropdown
  ========================================================================== */

.account-dropdown {
	display: inline-block;
	height: 4.5rem;
	line-height: 4.5rem;
	cursor: pointer;

	&:hover,
	&:active,
	&:focus {
		text-decoration: none;
	}

	.avatar {
		@include box-shadow(0 0 0 0 $black100);
		@include transition(all .2s ease);
	}

	&:hover {

		.avatar {
			@include box-shadow(0 0 0 2px $black500);
		}
	}

	.dropdown-toggle {
		display: block;
		border: 0;
		padding: 0 1.25rem;
	}

	.dropdown-menu {

        .dropdown-menu-item {
            margin: .5rem 0;
            padding: .125rem 0;

            &:hover {

                .menu-link,
                .btn-link .menu-link {
                    color: white;
                }

                .icon {
                    fill: white;
                }
            }

            .menu-link {
                background-color: transparent;
            }

            .btn-dropdown-logout {
                padding:0 .5rem;

                &.btn-link {

                    &:hover{
                        text-decoration: none;
                    }
                }

                span {
                    color: $black800;
                    font-weight:normal;
                }
            }

            .menu-link {
                display: inline;
                padding: .25rem .500rem;
            }

            .btn-link {

                .menu-link {
                	padding: 0;
                    font-weight:normal;
                    color: $black800;
                }
            }

            form{
                display: inline;
            }
        }
    }
}

/* ==========================================================================
  Photo Gallery
  ========================================================================== */

.photo-gallery {
	
	// List Photo Gallery
	// Used inside the photo gallery page
	&.list-photo-gallery {
		
		.photo-gallery-item {
			position: relative;
			margin-bottom: $baseline;
			text-align: center;

			@include max-bp(s) {
				padding-bottom: 1rem;
				border-bottom: 1px solid $bluegrey900;
			}

			@include bp(m) {
				margin-bottom: 2rem;
			}

			@include bp(l) {
				padding-right: 14rem;
			}
		}

		figure {
			margin-bottom: $baseline;
			background-color: lighten($bluegrey1000, 3%);
		}

		.photo-img {
			cursor: pointer;
			width: auto;
			margin: auto;
		}

		.photo-caption {
			width: auto;
			background-color: $bluegrey1000;
			text-align: left;

			@include bp(l) {
				position: absolute;
				right: 0;
				top: 0;
				width: 14rem;
				height: 100%;
				padding-left: 1rem;

				&:before {
					display: block;
					width: 30px;
					height: 1px;
					margin-bottom: $baseline;
					background: $bluegrey800;
					content: '';
				}
			}

			> p {
				@include font-size($fontsize200);
				line-height: 1.5rem;
				word-wrap: break-word;
			}

			.photo-credit {
				display: block;
				@include font-size($fontsize100);
				color: $bluegrey600;
			}
		}
	}
}

// Photo Gallery Preview
// Used inside a story list template
.photo-gallery-preview {
	margin-bottom: $baseline;
	padding-top: $baseline;
	clear: left;

	@include bp(l) {
		padding-top: 0;
		clear: none;
	}

	.preview-gallery-heading {
		margin-bottom: $baseline;
		@include font-size($fontsize300);

		@include bp(m) {
			@include font-size($fontsize400);
		}
	}

	.preview-gallery-item {
		@include flex(auto);
		margin: 0 1%;
		width: 0; // gallery item min width

		@include bp(m) {
			margin: 0 $baseline / 2;
		}
	}

	.preview-gallery-list {
		@include display(flex);
		@include flex-direction(row);
		@include flex-wrap(nowrap);

		&.multi-row-gallery {
			@include flex-wrap(wrap);

			.preview-gallery-item { 
				width: 8rem;
				margin: 0 $baseline $baseline 0;

				img {
					width: 100%;
				}
			}
		}
	}
}

/* ==========================================================================
  Most Read
  ========================================================================== */

.most-read {
	.story-heading {
		overflow: hidden;
	}

	.number {
		float: left;
		line-height: 1rem;
		margin: 0 .75rem;
		padding-top: .25rem;
	}
}

/* ==========================================================================
  Related
  ========================================================================== */

.related-stories {

	h5 {
		margin-bottom: .25rem;
		font-family: $brandtypeface;
		font-weight: normal;
		@include font-size($fontsize300);
		line-height: 3rem;
		color: $black700;
		text-transform: uppercase;
		position: relative;

		&:before {
			display: block;
			content: '';
			width: 2rem;
			height: .25rem;
			position: absolute;
			top: 0;
			left: 0;
		}
	}

	.story-heading {
		margin-bottom: 0;
		@include font-size($fontsize200);
		line-height: 1.15rem;
	}

	.story-media {
		width: 5rem;
		float: left;
		margin-right: .5rem;
	}

	.timestamp {
		white-space: nowrap;
	}

	&.inner {
		display: none;

		@include bp(m) {
			display: block;
			float: right;
			clear: right;
			width: 10rem;
			margin-left: 1.5rem;
		}

		@include bp(xl) {
			float: left;
			margin-left: -13rem;
		}

		.story-media {
			@include bp(m) {
				width: 100%;
				margin: 0 0 .25rem 0;
			}
		}
	}
}

/* ==========================================================================
  Cards
  ========================================================================== */

@import "modules/cards";

/* ==========================================================================
  District List
  ========================================================================== */

.district-group-list {
	width: 90%;

	@include bp(m) {
		width: 100%;
	}

	.district-group {
		border-top: 2px solid $bordercolor;
	}
		
	.index-alphabetic-list {
		font-family: $headingstypeface;
		@include font-size($fontsize900);
	}
	
	.district-col {
		margin-bottom: 1rem;

		@include bp(m) {
			margin-bottom: 2rem;
		}

		.label {
			margin-bottom: 1rem;

			@include bp(m) {
				margin-top: 1rem;
			}
		}

		.district-list-link {		
				
            li {
				
                a {
                    text-decoration: none;
                    color: $black700;
                    @include font-size($fontsize300);
					
					&:hover {
						color: $black900;
					}
                }	
            }
		}
	}
}

/* ==========================================================================
  Map
  ========================================================================== */

.map {
	position: relative;
	overflow: hidden;
}

/* ==========================================================================
  Meta
  ========================================================================== */

.meta-byline,
.meta-social {
	margin-bottom: $baseline;
	@include clearfix;
}

// Meta Social ===============================================================

.meta-social {

	li {
		margin: 0 .15rem;
	}

	.social-share {
		width: 50%;
		float: left;

		@include bp(m) {
		}

		@include bp(m) {
			padding-right: 0;
			width: 9rem;
			float: right;
		}
		
		@include bp(xl) {
			width: 100%;
			margin-bottom: 1rem;
			text-align: left;
			float: none;
		}			
	}

	&.bottom-social .social-share {
		width: 100%;
		text-align: left;
	}

	.social-counter {

		.number {
			font-family: $headingstypeface;
			font-weight: 700;
			@include font-size($fontsize500);
			line-height: 1.5rem;
			color: $bluegrey700;
			vertical-align: middle;

			@include bp(m) {
				display: block;
				@include font-size($fontsize600);
			}

			@include bp(xl) {
				@include font-size($fontsize800);

			}
		}

		.counter-label {
			display: none;
			@include font-size($fontsize100);
			color: $bluegrey700;

			@include bp(m) {
				display: inline-block;
			}
		}

		.icon {
			width: 12px;
			height: 12px;
			fill: $bluegrey600;
		}
	}
}

// Meta Byline ===============================================================

.meta-byline {
	padding-bottom: $baseline;
	border-bottom: 1px solid $bordercolor;

	@include bp(m) {
		width: 50%;
		float: left;
		padding-bottom: 0;
		border-bottom: 0;
	}

	@include bp(l) {
		width: 64%;
	}

	@include bp(xl) {
		width: 100%;
		float: none;
		padding-bottom: $baseline;
		border-bottom: 1px solid $bordercolor;
	}

	.author {
		@include bp(xl) {
			margin-bottom: $baseline;
		}
	}

	.author-photo {
		float: left;
		margin: 0 $baseline 0 0;

		@include bp(xl) {
			float: none;
			margin: 0 0 $baseline 0;
		}
	}

	.author-name {
		display: inline-block;
		@include font-size($fontsize200);

		@include bp(xl) {
			display: block;
		}
	}

	.author-role {
		color: $black800;
		font-style: italic;

		@include bp(m) {
			margin-bottom: $baseline / 2;
		}

		@include max-bp(m) {
			padding-left: $baseline / 2;
		}
	}

	.author-twitter {
		display: none;

		& > .icon {
			margin: 0 5px;
			width: 14px;
			height: 14px;
			fill: lightblue;
		}
	}
}

/* ==========================================================================
  Site Search
  ========================================================================== */

// Start search ===============================================================

.start-search {
	position: absolute;
	top: 0;
	width: 100%;
	left: 0;
	z-index: 999;
	opacity: 0;
	visibility: hidden;
	@include transition(opacity .25s 0s, visibility 0s .25s);

	@include bp(l) {
		top: 4.5rem;
	}
	
	&.is-visible {
		opacity: 1;
		visibility: visible;
		@include transition(opacity .25s 0s, visibility 0s 0s);
	}

	form {
		height: 100%;
		width: 100%;
	}

	label {
		opacity: 0;
	}

	input[type="search"] {
		border-radius: 0;
		border: none;
		background: transparent;
		width: 75%;
		@include appearance(none);
		padding: 1rem;
		@include font-size($fontsize500);
		font-weight: 300;
		line-height: 2.5rem;
		color: white;
		vertical-align: middle;

		@include bp(m) {
			width: 92%;
			padding: 2rem;
			@include font-size($fontsize800);
			letter-spacing: -1px;
		}

		@include bp(l) {
			width: 92%;
		}
	}
	
	input[type="search"]::-webkit-input-placeholder,
	input[type="search"]::-moz-placeholder,
	input[type="search"]:-ms-input-placeholder {
		color: $black500;
	}
	
	input[type="search"]:focus {
		outline: none;
	}

	.btn {
		position: absolute;	
		top: .75rem;
		right: 1rem;
		background: transparent;

		@include bp(m){
			top: 1.5rem;
		}

		@include bp(l) {
			&:hover {
				background-color: $black1000;
			}
		}

		&:active {
			box-shadow: none;
		}

		.icon {
			fill: white;
			width: 24px;
			height: 24px;

			@include bp(m) {
				width: 32px;
				height: 32px
			}
		}
	}
}

.search-overlay {
	/* shadow layer visible when navigation is active */
	position: absolute;
	z-index: 999;
	height: 100%;
	width: 100%;
	top: 0;
	left: 0;
	background-color: $focusoverlay;
	visibility: hidden;
	opacity: 0;
	@include backface-visibility(hidden);
	@include transition(opacity .25s 0s, visibility 0s .25s, transform .25s 0s);

	@include bp(l) {
		top: 4.5rem;
	}
		
	&.is-visible {
		opacity: 1;
		visibility: visible;
		@include transition(opacity .25s 0s, visibility 0s 0s, transform .25s 0s);
		
		.search-is-visible {
			@include transform(translateX(0));
		}	
	}
}

// Start Search button located in Header ===============================================================

.start-search-trigger {
	position: relative;
	width: 3.5rem;
	height: 3.5rem;
	display: block;
	overflow: hidden;
	white-space: nowrap;
	color: transparent; /* hide text */

	@include bp(m) {
		width: 4rem;
		height: 4rem;
	}

	@include bp(l) {
		width: 4.5rem;
		height: 4.5rem;
		background-color: white;	
	}

	&::before, &::after {
		/* search icon */
		content: '';
		position: absolute;
		@include transition(opacity .3s);
		/* Force Hardware Acceleration in WebKit */
		@include transform(translateZ(0));
		@include backface-visibility(hidden);
	}

	&::before {
		/* lens */
		top: 20px;
		left: 18px;
		width: 18px;
		height: 18px;
		border-radius: 50%;
		border: 3px solid $black500;
		@include transition(border-color .2s);

		@include bp(m) {
			top: 22px;
			left: 20px;
		}

		@include bp(l) {
			top: 25px;
			left: 26px;
		}
	}

	&::after {
		/* handle */
		height: 3px;
		width: 8px;
		background: $black500;
		bottom: 16px;
		right: 15px;
		@include transform(rotate(45deg));
		@include transition(background .2s);

		@include bp(m) {
			bottom: 22px;
			right: 20px;
		}

		@include bp(l) {
			bottom: 27px;
			right: 23px;
		}
	}

	&:hover {
		&:before {
			border-color: $black600;
		}
		&:after {
			background: $black600;
		}
	}

	span {
		/* container for the X icon */
		position: absolute;
		height: 100%;
		width: 100%;
		top: 0;
		left: 0;
	}

	span::before, span::after {
		/* close icon */
		content: '';
		position: absolute;
		display: inline-block;
		height: 3px;
		width: 22px;
		top: 50%;
		margin-top: -2px;
		left: 50%;
		margin-left: -11px;
		background: $black600;
		opacity: 0;
		/* Force Hardware Acceleration in WebKit */
		@include transform(translateZ(0));
		@include backface-visibility(hidden);
		@include transition(opacity .3s, transform .3s);
	}

	span::before {
		@include transform(rotate(45deg));
	}

	span::after {
		@include transform(rotate(-45deg));
	}

	&.search-is-visible {
		@include transition(background-color .2s);
		background-color: $focusoverlay;

		&::before, &::after {
			/* hide search icon */
			opacity: 0;
		}

		span::before, span::after {
			/* show close icon */
			opacity: 1;
			background: white;
		}

		span::before {
			@include transform(rotate(135deg));
		}

		span::after {
			@include transform(rotate(45deg));
		}
	}
}

// Search section with results ===============================================================

.search-section {

	@include bp(l) {
		margin-top: 1.5rem;
	}
	
	.search-form {
		width: 100%;
		float: left;
		margin-bottom: 2rem;
		padding-bottom: 1rem;
		border-bottom: 3px solid $bordercolor;


		.search-input {
			width: 100%;

			> h3 {
				display: block;
				margin: 0 .5rem 0 0;
				vertical-align: middle;

				@include bp(m) {
					display: inline-block;
				}
			}

			input[type="search"] {
				display: inline-block;
				width: auto;
				margin-bottom: .5rem;
				vertical-align: top;

				@include bp(m) {	
					margin-bottom: 1rem;	
				}

				@include bp(l) {
					margin-right: .5rem;	
					width: 22rem;	
				}
			}
		}

		.search-filters {
			width: 100%;

			label {
				display: block;

				@include bp(m) {
					display: inline-block;
				}
			}

			.dropdown {
				display: inline-block;
			}
		}
	}
	
	.search-results-info {
		margin-bottom: 1rem;
		padding-top: 1rem;
		border-top: 1px solid $bordercolor;
		color: $black800;

		> strong {
			color: $black1000;
		}

		@include bp(l) {
			@include font-size($fontsize500);
		}
	}

	.type-filter,
	.sort-filter {
		display: inline-block;
		margin-right: 3rem;
	}

	.sort-filter {
		@include max-bp(m) {
			display: none;
		}
	}

	.result-item {
		margin-bottom: 2rem;

		.list-story {
			padding-bottom: .5rem;
			border-bottom-width: 3px;

			.story-heading strong {
				color: $bluegrey500;
			}

			.story-summary,
			.story-footer {
				display: block;
			}

			.story-summary {
				display: block;
				@include font-size($fontsize200);
			}

			.story-footer .byline {
				border-top: 1px solid $bordercolor;
				padding-top: 1rem;
				line-height: 1rem;
				@include font-size($fontsize100);
				font-weight: 700;
			}
		}
	}

	.search-results {
		width: 100%;
	}
}

/* ==========================================================================
  Poll & Challenge
  ========================================================================== */

.poll,
.challenge {
	padding: 1rem;
	background-color: $bluegrey100;
	border-top: 2px solid;
}

// Challenge ===============================================================

.challenge,
.challenge-list {
	margin-bottom: 1rem;
}

.challenge-list {
	@include display(flex);
}

.challenge-item {
	width: 45%;
	padding: $baseline;
	float: left;
	@include display(flex);
	@include flex(1 1 auto);
	background-color: white;
	border-bottom: 2px solid $bluegrey200;

	@include bp(m) {
		width: 48%;
	}
}

.challenge-versus {
	position: relative;
	width: 5%;
	margin: 0 1%;
	float: left;
	@include display(flex);
	@include flex(1 1 auto);

	span {
		position: absolute;
		top: 50%;
		transform: translateY(-50%);
		@include font-size($fontsize200);
		font-family: $titleseriftypeface;
		font-style: italic;
		color: $bluegrey500;
		width: 100%;
		text-align: center;

		@include bp(m) {
			@include font-size($fontsize500);
		}
	}
}

.challenge-kicker {
	font-family: $titleseriftypeface;
	@include font-size($fontsize500);
}

.challenge-option {
	width: 100%;
	position: relative;
}

.challenge-option-media {
	position: relative;
	margin-bottom: 1rem;

	&:after {
		content: '';
		display: block;
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: $bluegrey900;
		opacity: 0;
		@include transition(opacity .15s ease-in);
		z-index: 1;
	}
}

.challenge-icon {
	width: 100%;
	height: 100%;
	position: absolute;
	top: 0;
	left: 0;
	background: url(icon-thumbs-up.svg) center center no-repeat;
	background-size: 24px;
	z-index: 2;
	opacity: 0;
	@include transition(opacity .15s ease-in);

	@include bp(m) {
		background-size: 64px;
	}
}

.challenge-option .block-link:hover {
	.challenge-option-media:after {
		opacity: .5;
	}
	.challenge-icon {
		opacity: 1;
	}
}

.challenge-option-title {
	display: block;
	word-wrap: break-word;
	color: $black900;
}

// Challenge Results

.challenge-result {
	margin-bottom: 16px;
	@include display(flex);

	li {
		@include flex-flow(row wrap);
		margin-right: .5rem;

		&:first-child,
		&:last-child {
			margin-right: 0;
		}
	}

	.challenge-result-name {
		width: 55%;

		h4 {
			margin-bottom: 0;
			@include font-size($fontsize200);
		}

		@include bp(m) {
			width: 60%;
		}
	}

	.challenge-position {
		width: 8%;
		font-family: $headingstypeface;
		font-weight: 900;
		text-align: center;
	}

	.challenge-result-thumb {
		width: 15%;
	}

	.challenge-result-counter {
		width: 25%;
		padding-left: .5rem;
		line-height: 1rem;
		border-left: 1px solid $bordercolor;

		span + span {
			display: block;
			@include font-size($fontsize100);
			color: $black600;
		}

		.challenge-counter-lose,
		.challenge-counter-win {
			font-family: $headingstypeface;
			font-weight: 900;
			@include font-size($fontsize200);
		}

		.challenge-counter-win {
			color: $bluegrey600;
		}

		.challenge-counter-lose {
			color: $bluegrey400;
		}
	}
}

.position-four {
	opacity: .75;
	background-color: $bluegrey100;

	.challenge-result {
		margin-bottom: 0;
		padding-bottom: 1rem;
	}
}

.result-divider {
	height: 2px;
	background: $black400;
	margin-bottom: 0;
}

// Poll ===============================================================

.poll {
	.poll-abstract,
	.radio-label,
	.checkbox-label {
		@include font-size($fontsize300);
	}

	.poll-title {
		color: $black900;
	}

	.poll-answer {
		background: $bluegrey200;
		float: left;
		height: auto;
		margin: 5px 5px 5px 0;
		width: 100%;

		@include bp(l) {
			width: 60%;
		}
	}

	.poll-answer-bar {
		background-color: $bluegrey500;
		float: none;
		height: 14px;
		margin: 0;
		border: 0;
		padding: 0;
	}

	.poll-answer-votes,
	.poll-answer-perc {
		color: $bluegrey700;
		margin: 0 .25rem;
		display: inline-block;
	}

	.poll-answer-votes {
		@include font-size($fontsize100);
	}

	.poll-answer-perc {
		font-weight: 700;
		@include font-size($fontsize300);
	}

	.poll-results {
		list-style: none;
		margin: 0;
	}

	.poll-form {
		border-top: 1px solid $bluegrey200;
		border-bottom: 1px solid $bluegrey200;
		margin-bottom: 1rem;
	}

	.poll-form li,
	.poll-results li {
		margin: .25rem 0;
		padding: .25rem 0;
		border-bottom: 1px solid $bluegrey200;

		&:last-child {
			border-bottom: 0;
		}
	}
}

/* ==========================================================================
  Story
  ========================================================================== */

@import "modules/story";


/* ==========================================================================
  Tags
  ========================================================================== */

.tags-list {
	margin: $baseline * 2 0;

	@include bp(m) {
		margin: $baseline * 3 0;
	}

	@include bp(xl) {
		margin: $baseline * 4 0;
	}
}

.tag-item {
	margin: 0 .15rem;
}

// Tag Cloud ===============================================================

.bs_tagCloud {
	font-family: $headingstypeface;
	font-weight: 700;

	b {
		padding: 0 $baseline;

		a {
		    color: $bluegrey300;
		}
	}
}

b.bs_tagSize_1 a, b.bs_tagSize_2 a {
    @include font-size($fontsize100);
}

b.bs_tagSize_3 a {
    @include font-size($fontsize300);
    color: $bluegrey300;
}

b.bs_tagSize_4 a {
    @include font-size($fontsize400);
    color: $bluegrey400;
}

b.bs_tagSize_5 a {
    @include font-size($fontsize500);
    color: $bluegrey500;
}

b.bs_tagSize_6 a {
    @include font-size($fontsize600);
    color: $bluegrey600;
}

b.bs_tagSize_7 a {
    @include font-size($fontsize700);
    color: $bluegrey700;
}

b.bs_tagSize_8 a {
    @include font-size($fontsize800);
    color: $bluegrey800;
}

b.bs_tagSize_9 a, b.bs_tagSize_10 a {
    @include font-size($fontsize900);
    color: $bluegrey900;
}

b.bs_tagSize_11 a, b.bs_tagSize_12 a {
    @include font-size($fontsize1000);
    color: darken($bluegrey900,5%);
}

/* ==========================================================================
  Today
  ========================================================================== */

.module-today {

	.module-title {
		padding-bottom: 0;
		line-height: 1rem;
		border-bottom: 0;
	}

	.logo {
		height: 1rem;
	}
}


/* ==========================================================================
  Users List
  ========================================================================== */

.users-list {
	li {
		margin: .3rem;
	}
}

/* ==========================================================================
  Video Player
  ========================================================================== */

.embed-video-player {
	margin-bottom: 1rem;
}